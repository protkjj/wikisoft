#!/usr/bin/env python3
"""
ìƒ˜í”Œ ì¼€ì´ìŠ¤ ìƒì„±ê¸° - í—¤ë” ë³€í˜•ìœ¼ë¡œ í•™ìŠµ ë°ì´í„° ì¦ê°•
"""
import sys
import os
sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from internal.memory.case_store import CaseStore

# ë‹¤ì–‘í•œ í—¤ë” íŒ¨í„´ë“¤ (ì‹¤ì œ ê³ ê° íŒŒì¼ì—ì„œ ìì£¼ ë³´ì´ëŠ” ë³€í˜•ë“¤)
SAMPLE_PATTERNS = [
    # ===== ê¸°ë³¸ íŒ¨í„´ (10ê°œ) =====
    {
        "name": "í‘œì¤€í˜•",
        "headers": ["ì‚¬ì›ë²ˆí˜¸", "ìƒë…„ì›”ì¼", "ì„±ë³„", "ì…ì‚¬ì¼ì", "ì¢…ì—…ì›êµ¬ë¶„", "ê¸°ì¤€ê¸‰ì—¬", "í‡´ì§ê¸ˆì¶”ê³„ì•¡"],
    },
    {
        "name": "ì•½ì–´í˜•",
        "headers": ["ì‚¬ë²ˆ", "ìƒì¼", "ì„±ë³„ì½”ë“œ", "ì…ì‚¬", "ì§ì›êµ¬ë¶„", "ê¸‰ì—¬", "í‡´ì§ê¸ˆ"],
    },
    {
        "name": "ì˜ë¬¸í˜•",
        "headers": ["emp_no", "birth_date", "gender", "hire_date", "emp_type", "salary", "severance"],
    },
    {
        "name": "í˜¼í•©í˜•",
        "headers": ["ì§ì›ë²ˆí˜¸", "DOB", "M/F", "ì…ì‚¬ì¼", "êµ¬ë¶„", "ì›”ê¸‰ì—¬", "ì˜ˆìƒí‡´ì§ê¸ˆ"],
    },
    {
        "name": "ê³µë°±í¬í•¨í˜•",
        "headers": ["ì‚¬ì› ë²ˆí˜¸", "ìƒë…„ ì›”ì¼", "ì„± ë³„", "ì…ì‚¬ ì¼ì", "ì¢…ì—…ì› êµ¬ë¶„", "ê¸°ì¤€ ê¸‰ì—¬"],
    },
    {
        "name": "ê´„í˜¸ì„¤ëª…í˜•",
        "headers": [
            "ì‚¬ì›ë²ˆí˜¸(í•„ìˆ˜)",
            "ìƒë…„ì›”ì¼(YYYYMMDD)",
            "ì„±ë³„(1:ë‚¨,2:ì—¬)",
            "ì…ì‚¬ì¼ì(í•„ìˆ˜)",
            "ì¢…ì—…ì›êµ¬ë¶„(1:ì§ì›,3:ì„ì›)",
            "ê¸°ì¤€ê¸‰ì—¬(ì›)",
        ],
    },
    {
        "name": "í™•ì¥í˜•",
        "headers": [
            "ì‚¬ì›ë²ˆí˜¸", "ìƒë…„ì›”ì¼", "ì„±ë³„", "ì…ì‚¬ì¼ì", 
            "ë¶€ì„œ", "ì§ê¸‰", "ì¢…ì—…ì›êµ¬ë¶„", "ê¸°ì¤€ê¸‰ì—¬",
            "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ì°¨ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ì ìš©ë°°ìˆ˜", "ì œë„êµ¬ë¶„"
        ],
    },
    {
        "name": "ìµœì†Œí˜•",
        "headers": ["ì‚¬ë²ˆ", "ìƒë…„ì›”ì¼", "ì…ì‚¬ì¼", "ê¸‰ì—¬"],
    },
    {
        "name": "ì˜ë¬¸ì•½ì–´í˜•",
        "headers": ["empNo", "birthDate", "sex", "joinDate", "empType", "baseSalary"],
    },
    {
        "name": "ìŠ¤ë„¤ì´í¬ì¼€ì´ìŠ¤í˜•",
        "headers": ["employee_id", "date_of_birth", "gender_code", "hire_date", "employee_type", "base_salary"],
    },
    # ===== í™•ì¥ íŒ¨í„´ (10ê°œ) - ì´ë¦„/ì—°ë½ì²˜ í¬í•¨ =====
    {
        "name": "ì¸ì‚¬ê¸°ë³¸í˜•",
        "headers": ["ì‚¬ì›ë²ˆí˜¸", "ì´ë¦„", "ìƒë…„ì›”ì¼", "ì„±ë³„", "ì…ì‚¬ì¼ì", "ë¶€ì„œ", "ì§ê¸‰"],
    },
    {
        "name": "ì—°ë½ì²˜í¬í•¨í˜•",
        "headers": ["ì‚¬ë²ˆ", "ì„±ëª…", "ìƒë…„ì›”ì¼", "ì „í™”ë²ˆí˜¸", "ì´ë©”ì¼", "ì…ì‚¬ì¼", "ë¶€ì„œì½”ë“œ"],
    },
    {
        "name": "í’€ì¸ì‚¬í˜•",
        "headers": ["ì§ì›ë²ˆí˜¸", "ì„±ëª…", "ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸", "ì„±ë³„", "ì…ì‚¬ì¼ì", "ë¶€ì„œ", "ì§ê¸‰", "ê¸°ì¤€ê¸‰ì—¬"],
    },
    {
        "name": "ê¸‰ì—¬ê¸°ë³¸í˜•",
        "headers": ["ì‚¬ì›ë²ˆí˜¸", "ì´ë¦„", "ê¸°ì¤€ê¸‰ì—¬", "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ì°¨ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ì ìš©ë°°ìˆ˜"],
    },
    {
        "name": "ì˜ë¬¸ì¸ì‚¬í˜•",
        "headers": ["emp_id", "name", "birthday", "gender", "join_date", "department", "position"],
    },
    {
        "name": "í˜¼í•©ì¸ì‚¬í˜•",
        "headers": ["EmpNo", "ì´ë¦„", "DOB", "Gender", "ì…ì‚¬ì¼", "Dept", "Grade"],
    },
    {
        "name": "ìƒì„¸ì¸ì‚¬í˜•",
        "headers": ["ì‚¬ì›ë²ˆí˜¸", "ì„±ëª…", "ìƒë…„ì›”ì¼", "ì„±ë³„", "ì…ì‚¬ì¼ì", "ë¶€ì„œëª…", "ì§ê¸‰ëª…", "ì§ì±…", "í˜¸ë´‰"],
    },
    {
        "name": "ì—°ë½ì²˜í™•ì¥í˜•",
        "headers": ["ì‚¬ë²ˆ", "ì´ë¦„", "íœ´ëŒ€í°", "íšŒì‚¬ë©”ì¼", "ê°œì¸ë©”ì¼", "ì£¼ì†Œ", "ì…ì‚¬ì¼"],
    },
    {
        "name": "ì½”ë“œí˜•",
        "headers": ["emp_code", "emp_name", "birth_dt", "gender_cd", "hire_dt", "dept_cd", "job_cd"],
    },
    {
        "name": "ì–¸ë”ìŠ¤ì½”ì–´í˜•",
        "headers": ["ì‚¬ì›_ë²ˆí˜¸", "ì„±_ëª…", "ìƒë…„_ì›”ì¼", "ì„±_ë³„", "ì…ì‚¬_ì¼ì", "ê¸°ì¤€_ê¸‰ì—¬"],
    },
    # ===== ë³µì¡ íŒ¨í„´ (10ê°œ) - í‡´ì§ê¸ˆ/ì •ì‚° í¬í•¨ =====
    {
        "name": "í‡´ì§ê¸ˆê¸°ë³¸í˜•",
        "headers": ["ì‚¬ì›ë²ˆí˜¸", "ì„±ëª…", "ì…ì‚¬ì¼", "í‡´ì§ê¸ˆ", "ë‹¹ë…„ë„í‡´ì§ê¸ˆ", "ì°¨ë…„ë„í‡´ì§ê¸ˆ"],
    },
    {
        "name": "í‡´ì§ê¸ˆìƒì„¸í˜•",
        "headers": ["ì‚¬ë²ˆ", "ì´ë¦„", "ì…ì‚¬ì¼ì", "ê¸°ì¤€ê¸‰ì—¬", "ê·¼ì†ë…„ìˆ˜", "í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ì¤‘ê°„ì •ì‚°ì•¡", "ì”ì—¬í‡´ì§ê¸ˆ"],
    },
    {
        "name": "DCí˜•",
        "headers": ["ì‚¬ì›ë²ˆí˜¸", "ì„±ëª…", "ìƒë…„ì›”ì¼", "ì…ì‚¬ì¼", "ì¢…ì—…ì›êµ¬ë¶„", "DCë¶€ë‹´ê¸ˆ", "ì ìš©ë°°ìˆ˜", "ì œë„êµ¬ë¶„"],
    },
    {
        "name": "DBí˜•",
        "headers": ["emp_no", "name", "hire_date", "salary", "service_years", "db_reserve", "multiplier"],
    },
    {
        "name": "ì •ì‚°í¬í•¨í˜•",
        "headers": ["ì§ì›ë²ˆí˜¸", "ì„±ëª…", "ì…ì‚¬ì¼", "í‡´ì§ê¸ˆëˆ„ê³„", "ì¤‘ê°„ì •ì‚°ì¼", "ì¤‘ê°„ì •ì‚°ì•¡", "í˜„ì¬ì ë¦½ê¸ˆ"],
    },
    {
        "name": "ì—°ê¸ˆí˜•",
        "headers": ["ì‚¬ë²ˆ", "ì´ë¦„", "ê°€ì…ì¼", "ì›”ë‚©ì…ì•¡", "ì ë¦½ê¸ˆ", "ìˆ˜ìµë¥ ", "ì˜ˆìƒì—°ê¸ˆ"],
    },
    {
        "name": "ì¢…í•©í‡´ì§í˜•",
        "headers": ["ì‚¬ì›ë²ˆí˜¸", "ì„±ëª…", "ì…ì‚¬ì¼ì", "ê¸°ì¤€ê¸‰ì—¬", "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ì°¨ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ì ìš©ë°°ìˆ˜", "ì œë„êµ¬ë¶„", "ì¢…ì—…ì›êµ¬ë¶„"],
    },
    {
        "name": "ì™¸êµ­ì–´í˜¼í•©í‡´ì§í˜•",
        "headers": ["empId", "name", "hireDate", "baseSalary", "severancePay", "serviceYears", "multiplier"],
    },
    {
        "name": "ìƒì„¸í‡´ì§í˜•",
        "headers": ["ì‚¬ì›ë²ˆí˜¸", "ì„±ëª…", "ìƒë…„ì›”ì¼", "ì…ì‚¬ì¼", "ê¸°ì¤€ê¸‰ì—¬", "ê·¼ì†ì›”ìˆ˜", "í‡´ì§ê¸‰ì—¬", "DCì ë¦½ê¸ˆ", "DBì ë¦½ê¸ˆ"],
    },
    {
        "name": "ì •ì‚°ì´ë ¥í˜•",
        "headers": ["ì‚¬ë²ˆ", "ì´ë¦„", "ì…ì‚¬ì¼", "1ì°¨ì •ì‚°ì¼", "1ì°¨ì •ì‚°ì•¡", "2ì°¨ì •ì‚°ì¼", "2ì°¨ì •ì‚°ì•¡", "í˜„ì¬í‡´ì§ê¸ˆ"],
    },
]

# í‘œì¤€ í•„ë“œ ë§¤í•‘ (ìˆ˜ë™ìœ¼ë¡œ ì •ì˜ - í•™ìŠµìš©)
MANUAL_MAPPINGS = {
    # ì‚¬ì›ë²ˆí˜¸ ë³€í˜•
    "ì‚¬ì›ë²ˆí˜¸": "ì‚¬ì›ë²ˆí˜¸", "ì‚¬ë²ˆ": "ì‚¬ì›ë²ˆí˜¸", "emp_no": "ì‚¬ì›ë²ˆí˜¸", "ì§ì›ë²ˆí˜¸": "ì‚¬ì›ë²ˆí˜¸",
    "ì‚¬ì› ë²ˆí˜¸": "ì‚¬ì›ë²ˆí˜¸", "ì‚¬ì›ë²ˆí˜¸(í•„ìˆ˜)": "ì‚¬ì›ë²ˆí˜¸", "empNo": "ì‚¬ì›ë²ˆí˜¸", "employee_id": "ì‚¬ì›ë²ˆí˜¸",
    "emp_id": "ì‚¬ì›ë²ˆí˜¸", "EmpNo": "ì‚¬ì›ë²ˆí˜¸", "emp_code": "ì‚¬ì›ë²ˆí˜¸", "ì‚¬ì›_ë²ˆí˜¸": "ì‚¬ì›ë²ˆí˜¸", "empId": "ì‚¬ì›ë²ˆí˜¸",
    
    # ì´ë¦„/ì„±ëª… ë³€í˜•
    "ì´ë¦„": "ì´ë¦„", "ì„±ëª…": "ì´ë¦„", "name": "ì´ë¦„", "emp_name": "ì´ë¦„", "ì„±_ëª…": "ì´ë¦„", "fullname": "ì´ë¦„",
    
    # ìƒë…„ì›”ì¼ ë³€í˜•
    "ìƒë…„ì›”ì¼": "ìƒë…„ì›”ì¼", "ìƒì¼": "ìƒë…„ì›”ì¼", "birth_date": "ìƒë…„ì›”ì¼", "DOB": "ìƒë…„ì›”ì¼",
    "ìƒë…„ ì›”ì¼": "ìƒë…„ì›”ì¼", "ìƒë…„ì›”ì¼(YYYYMMDD)": "ìƒë…„ì›”ì¼", "birthDate": "ìƒë…„ì›”ì¼", "date_of_birth": "ìƒë…„ì›”ì¼",
    "birthday": "ìƒë…„ì›”ì¼", "birth_dt": "ìƒë…„ì›”ì¼", "ìƒë…„_ì›”ì¼": "ìƒë…„ì›”ì¼",
    
    # ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸
    "ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸": "ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸", "ì£¼ë¯¼ë²ˆí˜¸": "ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸", "ssn": "ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸",
    
    # ì„±ë³„ ë³€í˜•
    "ì„±ë³„": "ì„±ë³„", "ì„±ë³„ì½”ë“œ": "ì„±ë³„", "gender": "ì„±ë³„", "M/F": "ì„±ë³„",
    "ì„± ë³„": "ì„±ë³„", "ì„±ë³„(1:ë‚¨,2:ì—¬)": "ì„±ë³„", "sex": "ì„±ë³„", "gender_code": "ì„±ë³„",
    "Gender": "ì„±ë³„", "gender_cd": "ì„±ë³„", "ì„±_ë³„": "ì„±ë³„",
    
    # ì…ì‚¬ì¼ì ë³€í˜•
    "ì…ì‚¬ì¼ì": "ì…ì‚¬ì¼ì", "ì…ì‚¬": "ì…ì‚¬ì¼ì", "hire_date": "ì…ì‚¬ì¼ì", "ì…ì‚¬ì¼": "ì…ì‚¬ì¼ì",
    "ì…ì‚¬ ì¼ì": "ì…ì‚¬ì¼ì", "ì…ì‚¬ì¼ì(í•„ìˆ˜)": "ì…ì‚¬ì¼ì", "joinDate": "ì…ì‚¬ì¼ì", "join_date": "ì…ì‚¬ì¼ì",
    "hire_dt": "ì…ì‚¬ì¼ì", "hireDate": "ì…ì‚¬ì¼ì", "ê°€ì…ì¼": "ì…ì‚¬ì¼ì", "ì…ì‚¬_ì¼ì": "ì…ì‚¬ì¼ì",
    
    # ì¢…ì—…ì›êµ¬ë¶„ ë³€í˜•
    "ì¢…ì—…ì›êµ¬ë¶„": "ì¢…ì—…ì›êµ¬ë¶„", "ì§ì›êµ¬ë¶„": "ì¢…ì—…ì›êµ¬ë¶„", "emp_type": "ì¢…ì—…ì›êµ¬ë¶„", "êµ¬ë¶„": "ì¢…ì—…ì›êµ¬ë¶„",
    "ì¢…ì—…ì› êµ¬ë¶„": "ì¢…ì—…ì›êµ¬ë¶„", "ì¢…ì—…ì›êµ¬ë¶„(1:ì§ì›,3:ì„ì›)": "ì¢…ì—…ì›êµ¬ë¶„", "employee_type": "ì¢…ì—…ì›êµ¬ë¶„",
    
    # ê¸°ì¤€ê¸‰ì—¬ ë³€í˜•
    "ê¸°ì¤€ê¸‰ì—¬": "ê¸°ì¤€ê¸‰ì—¬", "ê¸‰ì—¬": "ê¸°ì¤€ê¸‰ì—¬", "salary": "ê¸°ì¤€ê¸‰ì—¬", "ì›”ê¸‰ì—¬": "ê¸°ì¤€ê¸‰ì—¬",
    "ê¸°ì¤€ ê¸‰ì—¬": "ê¸°ì¤€ê¸‰ì—¬", "ê¸°ì¤€ê¸‰ì—¬(ì›)": "ê¸°ì¤€ê¸‰ì—¬", "baseSalary": "ê¸°ì¤€ê¸‰ì—¬", "base_salary": "ê¸°ì¤€ê¸‰ì—¬",
    "ê¸°ì¤€_ê¸‰ì—¬": "ê¸°ì¤€ê¸‰ì—¬", "ì›”ë‚©ì…ì•¡": "ê¸°ì¤€ê¸‰ì—¬",
    
    # í‡´ì§ê¸ˆ ê´€ë ¨
    "í‡´ì§ê¸ˆì¶”ê³„ì•¡": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "í‡´ì§ê¸ˆ": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "severance": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡",
    "ì˜ˆìƒí‡´ì§ê¸ˆ": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ë‹¹ë…„ë„í‡´ì§ê¸ˆ": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡",
    "í‡´ì§ê¸ˆëˆ„ê³„": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "severancePay": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "í‡´ì§ê¸‰ì—¬": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡",
    "í˜„ì¬í‡´ì§ê¸ˆ": "ë‹¹ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡",
    
    "ì°¨ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡": "ì°¨ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡", "ì°¨ë…„ë„í‡´ì§ê¸ˆ": "ì°¨ë…„ë„í‡´ì§ê¸ˆì¶”ê³„ì•¡",
    
    # ì ìš©ë°°ìˆ˜/ì œë„
    "ì ìš©ë°°ìˆ˜": "ì ìš©ë°°ìˆ˜", "multiplier": "ì ìš©ë°°ìˆ˜",
    "ì œë„êµ¬ë¶„": "ì œë„êµ¬ë¶„",
    
    # ë¶€ì„œ/ì§ê¸‰
    "ë¶€ì„œ": "ë¶€ì„œ", "department": "ë¶€ì„œ", "ë¶€ì„œëª…": "ë¶€ì„œ", "Dept": "ë¶€ì„œ", "ë¶€ì„œì½”ë“œ": "ë¶€ì„œ", "dept_cd": "ë¶€ì„œ",
    "ì§ê¸‰": "ì§ê¸‰", "position": "ì§ê¸‰", "ì§ê¸‰ëª…": "ì§ê¸‰", "Grade": "ì§ê¸‰", "job_cd": "ì§ê¸‰",
    "ì§ì±…": "ì§ì±…", "í˜¸ë´‰": "í˜¸ë´‰",
    
    # ì—°ë½ì²˜
    "ì „í™”ë²ˆí˜¸": "ì „í™”ë²ˆí˜¸", "íœ´ëŒ€í°": "ì „í™”ë²ˆí˜¸", "phone": "ì „í™”ë²ˆí˜¸",
    "ì´ë©”ì¼": "ì´ë©”ì¼", "íšŒì‚¬ë©”ì¼": "ì´ë©”ì¼", "ê°œì¸ë©”ì¼": "ì´ë©”ì¼", "email": "ì´ë©”ì¼",
    "ì£¼ì†Œ": "ì£¼ì†Œ",
    
    # ê·¼ì†/ì •ì‚° ê´€ë ¨
    "ê·¼ì†ë…„ìˆ˜": "ê·¼ì†ë…„ìˆ˜", "service_years": "ê·¼ì†ë…„ìˆ˜", "serviceYears": "ê·¼ì†ë…„ìˆ˜", "ê·¼ì†ì›”ìˆ˜": "ê·¼ì†ì›”ìˆ˜",
    "ì¤‘ê°„ì •ì‚°ì•¡": "ì¤‘ê°„ì •ì‚°ì•¡", "ì”ì—¬í‡´ì§ê¸ˆ": "ì”ì—¬í‡´ì§ê¸ˆ", "í˜„ì¬ì ë¦½ê¸ˆ": "í˜„ì¬ì ë¦½ê¸ˆ",
    "1ì°¨ì •ì‚°ì¼": "1ì°¨ì •ì‚°ì¼", "1ì°¨ì •ì‚°ì•¡": "1ì°¨ì •ì‚°ì•¡", "2ì°¨ì •ì‚°ì¼": "2ì°¨ì •ì‚°ì¼", "2ì°¨ì •ì‚°ì•¡": "2ì°¨ì •ì‚°ì•¡",
    "ì¤‘ê°„ì •ì‚°ì¼": "ì¤‘ê°„ì •ì‚°ì¼",
    
    # DC/DB ê´€ë ¨
    "DCë¶€ë‹´ê¸ˆ": "DCë¶€ë‹´ê¸ˆ", "DCì ë¦½ê¸ˆ": "DCì ë¦½ê¸ˆ", "DBì ë¦½ê¸ˆ": "DBì ë¦½ê¸ˆ",
    "db_reserve": "DBì ë¦½ê¸ˆ", "ì ë¦½ê¸ˆ": "ì ë¦½ê¸ˆ", "ìˆ˜ìµë¥ ": "ìˆ˜ìµë¥ ", "ì˜ˆìƒì—°ê¸ˆ": "ì˜ˆìƒì—°ê¸ˆ",
}


def generate_matches(headers: list) -> list:
    """í—¤ë”ì— ëŒ€í•œ ë§¤ì¹­ ê²°ê³¼ ìƒì„±"""
    matches = []
    for h in headers:
        target = MANUAL_MAPPINGS.get(h)
        if target:
            matches.append({
                "source": h,
                "target": target,
                "confidence": 0.95,  # ìˆ˜ë™ ë§¤í•‘ì´ë¯€ë¡œ ë†’ì€ ì‹ ë¢°ë„
                "fallback": False,
            })
        else:
            matches.append({
                "source": h,
                "target": None,
                "confidence": 0.0,
                "unmapped": True,
            })
    return matches


def main():
    print("=" * 60)
    print("ğŸ§ª ìƒ˜í”Œ ì¼€ì´ìŠ¤ ìƒì„±ê¸°")
    print("=" * 60)
    
    store = CaseStore()
    created = 0
    
    for pattern in SAMPLE_PATTERNS:
        name = pattern["name"]
        headers = pattern["headers"]
        matches = generate_matches(headers)
        
        # ë§¤í•‘ëœ ê²ƒë§Œ ì¹´ìš´íŠ¸
        mapped = sum(1 for m in matches if m.get("target"))
        confidence = mapped / len(headers) if headers else 0
        
        case_id = store.save_case(
            headers=headers,
            matches=matches,
            confidence=confidence,
            was_auto_approved=True,
            human_corrections=None,
            metadata={
                "source": "synthetic",
                "pattern_name": name,
                "generated": True,
            }
        )
        
        print(f"âœ… {name}: {len(headers)}ê°œ í—¤ë”, {mapped}ê°œ ë§¤í•‘, ID={case_id}")
        created += 1
    
    print()
    print("=" * 60)
    print(f"ğŸ“Š ìƒì„± ì™„ë£Œ: {created}ê°œ ìƒ˜í”Œ ì¼€ì´ìŠ¤")
    print("=" * 60)
    
    # ìµœì¢… í†µê³„
    stats = store.get_stats()
    print(f"\nğŸ“ˆ ì „ì²´ í†µê³„:")
    print(f"  ì´ ì¼€ì´ìŠ¤: {stats['total_cases']}ê°œ")
    print(f"  ìë™ ìŠ¹ì¸: {stats['auto_approved']}ê°œ")
    print(f"  í—¤ë” íŒ¨í„´: {stats.get('unique_headers', 'N/A')}ê°œ")


if __name__ == "__main__":
    main()
